import{c as p,j as e,U as g,r as a,s as h,V as u,a as j,T as y}from"./index-BQ92t-xb.js";import{C as N}from"./Card-Cr9OAgbB.js";import{M as d}from"./MetricCard-CrIrYRD-.js";import v from"./clock-CiZ1IF_T.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],w=p("square-check-big",b),S=({employees:s,logs:r})=>{const t=s.filter(c=>c.is_active).length,i=r.length;return e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsx(d,{title:"Active Staff",value:t.toString(),icon:e.jsx(g,{className:"w-6 h-6 text-blue-500"})}),e.jsx(d,{title:"Total Logs This Period",value:i.toString(),icon:e.jsx(w,{className:"w-6 h-6 text-green-500"}),tooltip:"Represents the number of work logs filed."}),e.jsx(d,{title:"Coming Soon",value:"- hrs",icon:e.jsx(v,{className:"w-6 h-6 text-yellow-500"}),tooltip:"Total hours worked calculation will be added in a future update."})]})},k=({employees:s})=>{const r=t=>t?"bg-green-100 text-green-800":"bg-red-100 text-red-800";return e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Role"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Contact"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Status"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:s.map(t=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:t.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:t.job_role}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:[e.jsx("div",{children:t.contact_email}),e.jsx("div",{className:"text-xs",children:t.contact_phone})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm",children:e.jsx("span",{className:`px-2.5 py-0.5 rounded-full text-xs font-semibold ${r(t.is_active)}`,children:t.is_active?"Active":"Inactive"})})]},t.id))})]})})},E=()=>{const[s,r]=a.useState([]),[t,i]=a.useState([]),[c,n]=a.useState(!0),[x,m]=a.useState(null),f=a.useCallback(async()=>{n(!0),m(null);try{const[l,o]=await Promise.all([h.from("employees").select("*").order("name"),h.from("staff_logs").select("*, employees ( name, users ( name ) )").order("date",{ascending:!1}).limit(100)]);if(l.error)throw l.error;if(o.error)throw o.error;r(l.data||[]),i(o.data||[])}catch(l){m("Failed to load staff data: "+l.message),u.error("Failed to load staff data.")}finally{n(!1)}},[]);return a.useEffect(()=>{f()},[f]),c?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(j,{className:"w-8 h-8 animate-spin"})}):x?e.jsxs("div",{className:"p-6 bg-red-50 text-red-700 text-center",children:[e.jsx(y,{className:"mx-auto"})," ",x]}):e.jsxs("div",{className:"p-4 sm:p-6 space-y-6",children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Staff Overview"}),e.jsx(S,{employees:s,logs:t}),e.jsxs(N,{children:[e.jsx("div",{className:"p-4 border-b",children:e.jsx("h2",{className:"text-lg font-semibold",children:"Staff Members"})}),e.jsx("div",{className:"p-2",children:e.jsx(k,{employees:s})})]})]})};export{E as default};
