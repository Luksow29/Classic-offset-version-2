import{c as I,I as z,j as e,t as R,h as Y,r as u,a as b,Q as O,B as N,s as y,V as p,S as T,M as Q,D as X,i as ee,W as se,Y as U,Z as te,g as ae,$ as H,a0 as re,R as ne,m as ie,a1 as ce}from"./index-BQ92t-xb.js";import{C as w}from"./Card-Cr9OAgbB.js";import{I as C}from"./Input-BZEgl9G2.js";import{T as G}from"./TextArea-Cp0WOQfX.js";import le from"./user-CIFL-UWv.js";import oe from"./phone-BhdOTX_m.js";import de from"./building-1BUhKXo6.js";import me from"./shopping-bag-BrkeNu9j.js";import ue from"./clock-CiZ1IF_T.js";import{C as _}from"./check-B2F4x3B2.js";import fe from"./shield-BhVOJR9q.js";import{E as he,a as xe}from"./eye-off-C0SrYS6n.js";import{E as pe}from"./eye-B7MUet3E.js";import V from"./database-DNttJzrA.js";import{D as ge}from"./download-B9ew1_ti.js";import J from"./globe-MAQRJXQ_.js";import{L as je}from"./languages-BqDD95Lq.js";import{P as be}from"./palette-CeCNDCCv.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]],Ne=I("hard-drive",ye);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],we=I("key",ve);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],Se=I("monitor",ke);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=[["path",{d:"M12 22v-5",key:"1ega77"}],["path",{d:"M9 8V2",key:"14iosj"}],["path",{d:"M15 8V2",key:"18g5xt"}],["path",{d:"M18 8v5a4 4 0 0 1-4 4h-4a4 4 0 0 1-4-4V8Z",key:"osxo6l"}]],K=I("plug",_e);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Fe=I("upload",Ce),B=z.createContext(null),Ee=({defaultValue:r,value:a,onValueChange:d,children:g,className:f})=>{const[t,s]=z.useState(a||r);z.useEffect(()=>{a!==void 0&&s(a)},[a]);const l=z.useCallback(i=>{a===void 0&&s(i),d==null||d(i)},[d,a]);return e.jsx(B.Provider,{value:{value:t,onValueChange:l},children:e.jsx("div",{className:R("w-full",f),children:g})})},De=({children:r,className:a})=>e.jsx("div",{className:R("flex flex-wrap",a),children:r}),D=({value:r,children:a,className:d,disabled:g=!1})=>{const f=z.useContext(B);if(!f)throw new Error("TabsTrigger must be used within a Tabs component");const{value:t,onValueChange:s}=f,l=t===r;return e.jsx("button",{type:"button",role:"tab","aria-selected":l,disabled:g,onClick:()=>s(r),className:R("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",l?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:bg-muted hover:text-foreground",d),children:a})},A=({value:r,children:a,className:d})=>{const g=z.useContext(B);if(!g)throw new Error("TabsContent must be used within a Tabs component");const{value:f}=g;return f===r?e.jsx("div",{role:"tabpanel",tabIndex:0,className:R("focus:outline-none",d),children:a}):null},Ae=()=>{const{user:r,userProfile:a}=Y(),[d,g]=u.useState(!1),[f,t]=u.useState(!1),[s,l]=u.useState({name:"",email:"",phone:"",address:"",company:"",bio:""});u.useEffect(()=>{a&&l({name:a.name||"",email:a.email||"",phone:(a==null?void 0:a.phone)||"",address:(a==null?void 0:a.address)||"",company:(a==null?void 0:a.company)||"",bio:(a==null?void 0:a.bio)||""})},[a]);const i=n=>{const{id:o,value:j}=n.target;l(c=>({...c,[o]:j}))},m=async n=>{if(n.preventDefault(),!!r){t(!0);try{const{error:o}=await y.from("users").update({name:s.name,phone:s.phone||null,address:s.address||null,company:s.company||null,bio:s.bio||null}).eq("id",r.id);if(o)throw o;p.success("Profile updated successfully"),await y.rpc("sync_user_profile",{user_id:r.id,user_name:s.name,user_phone:s.phone||null,user_address:s.address||null})}catch(o){console.error("Error updating profile:",o),p.error(o.message||"Failed to update profile")}finally{t(!1)}}};return d?e.jsx(w,{children:e.jsx("div",{className:"flex justify-center items-center h-40",children:e.jsx(b,{className:"w-8 h-8 animate-spin text-primary"})})}):e.jsxs(w,{children:[e.jsx("h2",{className:"text-xl font-semibold mb-6",children:"User Profile"}),e.jsxs("form",{onSubmit:m,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(C,{id:"name",label:"Full Name",value:s.name,onChange:i,icon:e.jsx(le,{className:"h-4 w-4"}),required:!0}),e.jsx(C,{id:"email",label:"Email Address",type:"email",value:s.email,onChange:i,icon:e.jsx(O,{className:"h-4 w-4"}),disabled:!0,helperText:"Email cannot be changed"}),e.jsx(C,{id:"phone",label:"Phone Number",type:"tel",value:s.phone,onChange:i,icon:e.jsx(oe,{className:"h-4 w-4"})}),e.jsx(C,{id:"company",label:"Company",value:s.company,onChange:i,icon:e.jsx(de,{className:"h-4 w-4"})})]}),e.jsx(G,{id:"address",label:"Address",value:s.address,onChange:i,rows:3}),e.jsx(G,{id:"bio",label:"Bio",value:s.bio,onChange:i,rows:4,helperText:"Tell us a little about yourself"}),e.jsx("div",{className:"flex justify-end",children:e.jsx(N,{type:"submit",disabled:f,children:f?e.jsxs(e.Fragment,{children:[e.jsx(b,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):"Save Changes"})})]})]})},W={user_id:"",theme_preference:"system",font_size:"medium",reduced_motion:!1,high_contrast:!1,color_scheme:"blue",language_preference:"en",date_format:"DD/MM/YYYY",time_format:"24h",currency:"INR",timezone:"Asia/Kolkata",notification_preferences:{email:!0,push:!0,sms:!1,whatsapp:!1,frequency:"realtime",types:{orders:!0,payments:!0,stock:!0,system:!0}},security_preferences:{two_factor_enabled:!1,login_notifications:!0}};function q(){const{user:r}=Y(),[a,d]=u.useState(null),[g,f]=u.useState(!0),[t,s]=u.useState(null),l=async()=>{if(!r){d(null),f(!1);return}f(!0),s(null);try{const{data:n,error:o}=await y.from("user_settings").select("*").eq("user_id",r.id).single();if(o)if(o.code==="PGRST116"){const j={...W,user_id:r.id},{error:c}=await y.from("user_settings").insert([j]);if(c)throw c;d(j)}else throw o;else d(n)}catch(n){console.error("Error fetching user settings:",n),s(n.message),d({...W,user_id:r.id})}finally{f(!1)}},i=async n=>{if(!r||!a){p.error("You must be logged in to update settings");return}try{const{error:o}=await y.from("user_settings").update({...n,updated_at:new Date().toISOString()}).eq("user_id",r.id);if(o)throw o;return d(j=>j?{...j,...n}:null),p.success("Settings updated successfully"),m({...a,...n}),!0}catch(o){return console.error("Error updating settings:",o),p.error(`Failed to update settings: ${o.message}`),!1}},m=n=>{if(n.theme_preference!=="system")document.documentElement.classList.remove("light","dark"),document.documentElement.classList.add(n.theme_preference);else{const o=window.matchMedia("(prefers-color-scheme: dark)").matches;document.documentElement.classList.remove("light","dark"),document.documentElement.classList.add(o?"dark":"light")}document.documentElement.style.fontSize=n.font_size==="small"?"14px":n.font_size==="large"?"18px":"16px",n.reduced_motion?document.documentElement.classList.add("reduce-motion"):document.documentElement.classList.remove("reduce-motion"),n.high_contrast?document.documentElement.classList.add("high-contrast"):document.documentElement.classList.remove("high-contrast"),document.documentElement.setAttribute("data-color-scheme",n.color_scheme)};return u.useEffect(()=>{l()},[r==null?void 0:r.id]),u.useEffect(()=>{a&&m(a)},[a]),{settings:a,loading:g,error:t,updateSettings:i,fetchSettings:l}}const Le=()=>{const{user:r}=Y(),{settings:a,updateSettings:d,loading:g}=q(),[f,t]=u.useState(!1),[s,l]=u.useState({emailNotifications:!0,pushNotifications:!0,smsNotifications:!1,whatsappNotifications:!1,orderUpdates:!0,paymentAlerts:!0,stockAlerts:!0,systemAnnouncements:!0,notificationFrequency:"realtime"});u.useEffect(()=>{a&&l({emailNotifications:a.notification_preferences.email,pushNotifications:a.notification_preferences.push,smsNotifications:a.notification_preferences.sms,whatsappNotifications:a.notification_preferences.whatsapp,orderUpdates:a.notification_preferences.types.orders,paymentAlerts:a.notification_preferences.types.payments,stockAlerts:a.notification_preferences.types.stock,systemAnnouncements:a.notification_preferences.types.system,notificationFrequency:a.notification_preferences.frequency})},[a]);const i=async()=>{if(r){t(!0);try{await d({notification_preferences:{email:s.emailNotifications,push:s.pushNotifications,sms:s.smsNotifications,whatsapp:s.whatsappNotifications,frequency:s.notificationFrequency,types:{orders:s.orderUpdates,payments:s.paymentAlerts,stock:s.stockAlerts,system:s.systemAnnouncements}}})}catch(m){console.error("Error saving notification settings:",m),p.error(m.message||"Failed to save notification settings")}finally{t(!1)}}};return g?e.jsx(w,{className:"p-6",children:e.jsx("div",{className:"flex justify-center items-center h-40",children:e.jsx(b,{className:"w-8 h-8 animate-spin text-primary"})})}):e.jsxs(w,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(T,{className:"h-5 w-5 text-primary"}),e.jsx("h2",{className:"text-xl font-semibold",children:"Notification Settings"})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Notification Channels"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(O,{className:"h-5 w-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Email Notifications"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive notifications via email"})]})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:s.emailNotifications,onChange:()=>l({...s,emailNotifications:!s.emailNotifications})}),e.jsx("div",{className:"w-11 h-6 bg-muted peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-primary rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(T,{className:"h-5 w-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Push Notifications"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive notifications in the app"})]})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:s.pushNotifications,onChange:()=>l({...s,pushNotifications:!s.pushNotifications})}),e.jsx("div",{className:"w-11 h-6 bg-muted peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-primary rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Phone,{className:"h-5 w-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"SMS Notifications"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive notifications via SMS"})]})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:s.smsNotifications,onChange:()=>l({...s,smsNotifications:!s.smsNotifications})}),e.jsx("div",{className:"w-11 h-6 bg-muted peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-primary rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Q,{className:"h-5 w-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"WhatsApp Notifications"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive notifications via WhatsApp"})]})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:s.whatsappNotifications,onChange:()=>l({...s,whatsappNotifications:!s.whatsappNotifications})}),e.jsx("div",{className:"w-11 h-6 bg-muted peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-primary rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Notification Types"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(me,{className:"h-5 w-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Order Updates"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Notifications about order status changes"})]})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:s.orderUpdates,onChange:()=>l({...s,orderUpdates:!s.orderUpdates})}),e.jsx("div",{className:"w-11 h-6 bg-muted peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-primary rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(X,{className:"h-5 w-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Payment Alerts"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Notifications about payments and invoices"})]})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:s.paymentAlerts,onChange:()=>l({...s,paymentAlerts:!s.paymentAlerts})}),e.jsx("div",{className:"w-11 h-6 bg-muted peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-primary rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ee,{className:"h-5 w-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Stock Alerts"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Notifications about low stock and inventory"})]})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:s.stockAlerts,onChange:()=>l({...s,stockAlerts:!s.stockAlerts})}),e.jsx("div",{className:"w-11 h-6 bg-muted peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-primary rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(T,{className:"h-5 w-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"System Announcements"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Important system updates and announcements"})]})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:s.systemAnnouncements,onChange:()=>l({...s,systemAnnouncements:!s.systemAnnouncements})}),e.jsx("div",{className:"w-11 h-6 bg-muted peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-primary rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Notification Frequency"}),e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(ue,{className:"h-5 w-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Delivery Frequency"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"How often you want to receive notifications"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mt-3",children:[e.jsxs("div",{className:`p-4 border rounded-lg cursor-pointer transition-all ${s.notificationFrequency==="realtime"?"border-primary bg-primary/5":"border-border hover:border-primary/50"}`,onClick:()=>l({...s,notificationFrequency:"realtime"}),children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("h4",{className:"font-medium",children:"Real-time"}),e.jsx("div",{className:`w-4 h-4 rounded-full ${s.notificationFrequency==="realtime"?"bg-primary":"border border-muted-foreground"}`})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive notifications as events happen"})]}),e.jsxs("div",{className:`p-4 border rounded-lg cursor-pointer transition-all ${s.notificationFrequency==="daily"?"border-primary bg-primary/5":"border-border hover:border-primary/50"}`,onClick:()=>l({...s,notificationFrequency:"daily"}),children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("h4",{className:"font-medium",children:"Daily Digest"}),e.jsx("div",{className:`w-4 h-4 rounded-full ${s.notificationFrequency==="daily"?"bg-primary":"border border-muted-foreground"}`})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive a daily summary of all notifications"})]}),e.jsxs("div",{className:`p-4 border rounded-lg cursor-pointer transition-all ${s.notificationFrequency==="weekly"?"border-primary bg-primary/5":"border-border hover:border-primary/50"}`,onClick:()=>l({...s,notificationFrequency:"weekly"}),children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("h4",{className:"font-medium",children:"Weekly Digest"}),e.jsx("div",{className:`w-4 h-4 rounded-full ${s.notificationFrequency==="weekly"?"bg-primary":"border border-muted-foreground"}`})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive a weekly summary of all notifications"})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(N,{onClick:i,disabled:f,children:f?e.jsxs(e.Fragment,{children:[e.jsx(b,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):"Save Preferences"})})]})]})},Me=()=>{const{theme:r,setTheme:a}=se(),{settings:d,updateSettings:g,loading:f}=q(),[t,s]=u.useState({fontSize:"medium",reducedMotion:!1,highContrast:!1,colorScheme:"blue"});u.useEffect(()=>{d&&s({fontSize:d.font_size,reducedMotion:d.reduced_motion,highContrast:d.high_contrast,colorScheme:d.color_scheme})},[d]);const l=async()=>{await g({theme_preference:r,font_size:t.fontSize,reduced_motion:t.reducedMotion,high_contrast:t.highContrast,color_scheme:t.colorScheme})};return f?e.jsx(w,{className:"p-6",children:e.jsx("div",{className:"flex justify-center items-center h-40",children:e.jsx(b,{className:"w-8 h-8 animate-spin text-primary"})})}):e.jsxs(w,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(U,{className:"h-5 w-5 text-primary"}),e.jsx("h2",{className:"text-xl font-semibold",children:"Appearance Settings"})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Theme"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:`p-4 border rounded-lg cursor-pointer transition-all ${r==="light"?"border-primary bg-primary/5":"border-border hover:border-primary/50"}`,onClick:()=>a("light"),children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{className:"h-5 w-5 text-amber-500"}),e.jsx("h4",{className:"font-medium",children:"Light"})]}),r==="light"&&e.jsx(_,{className:"h-4 w-4 text-primary"})]}),e.jsx("div",{className:"h-20 bg-white border rounded-md flex items-center justify-center",children:e.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full"})})]}),e.jsxs("div",{className:`p-4 border rounded-lg cursor-pointer transition-all ${r==="dark"?"border-primary bg-primary/5":"border-border hover:border-primary/50"}`,onClick:()=>a("dark"),children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(te,{className:"h-5 w-5 text-indigo-400"}),e.jsx("h4",{className:"font-medium",children:"Dark"})]}),r==="dark"&&e.jsx(_,{className:"h-4 w-4 text-primary"})]}),e.jsx("div",{className:"h-20 bg-gray-900 border border-gray-700 rounded-md flex items-center justify-center",children:e.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full"})})]}),e.jsxs("div",{className:`p-4 border rounded-lg cursor-pointer transition-all ${r==="system"?"border-primary bg-primary/5":"border-border hover:border-primary/50"}`,onClick:()=>a("system"),children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Se,{className:"h-5 w-5 text-gray-500"}),e.jsx("h4",{className:"font-medium",children:"System"})]}),r==="system"&&e.jsx(_,{className:"h-4 w-4 text-primary"})]}),e.jsx("div",{className:"h-20 bg-gradient-to-r from-white to-gray-900 border rounded-md flex items-center justify-center",children:e.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full"})})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Font Size"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{className:`p-4 border rounded-lg cursor-pointer transition-all ${t.fontSize==="small"?"border-primary bg-primary/5":"border-border hover:border-primary/50"}`,onClick:()=>s({...t,fontSize:"small"}),children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h4",{className:"font-medium text-sm",children:"Small"}),t.fontSize==="small"&&e.jsx(_,{className:"h-4 w-4 text-primary"})]})}),e.jsx("div",{className:`p-4 border rounded-lg cursor-pointer transition-all ${t.fontSize==="medium"?"border-primary bg-primary/5":"border-border hover:border-primary/50"}`,onClick:()=>s({...t,fontSize:"medium"}),children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h4",{className:"font-medium",children:"Medium"}),t.fontSize==="medium"&&e.jsx(_,{className:"h-4 w-4 text-primary"})]})}),e.jsx("div",{className:`p-4 border rounded-lg cursor-pointer transition-all ${t.fontSize==="large"?"border-primary bg-primary/5":"border-border hover:border-primary/50"}`,onClick:()=>s({...t,fontSize:"large"}),children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h4",{className:"font-medium text-lg",children:"Large"}),t.fontSize==="large"&&e.jsx(_,{className:"h-4 w-4 text-primary"})]})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Accessibility"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Reduced Motion"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Minimize animations throughout the interface"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:t.reducedMotion,onChange:()=>s({...t,reducedMotion:!t.reducedMotion})}),e.jsx("div",{className:"w-11 h-6 bg-muted peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-primary rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"High Contrast"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Increase contrast for better visibility"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:t.highContrast,onChange:()=>s({...t,highContrast:!t.highContrast})}),e.jsx("div",{className:"w-11 h-6 bg-muted peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-primary rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Color Scheme"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:["blue","green","purple","orange","pink","teal","red","gray"].map(i=>e.jsxs("div",{className:`p-4 border rounded-lg cursor-pointer transition-all ${t.colorScheme===i?"border-primary bg-primary/5":"border-border hover:border-primary/50"}`,onClick:()=>s({...t,colorScheme:i}),children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("h4",{className:"font-medium capitalize",children:i}),t.colorScheme===i&&e.jsx(_,{className:"h-4 w-4 text-primary"})]}),e.jsx("div",{className:`h-6 rounded-md bg-${i}-500`})]},i))})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(N,{onClick:l,children:"Save Appearance Settings"})})]})]})},ze=()=>{const{user:r}=Y(),{settings:a,updateSettings:d,loading:g}=q(),f=ae(),[t,s]=u.useState(!1),[l,i]=u.useState(!1),[m,n]=u.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[o,j]=u.useState(!1),[c,k]=u.useState([{id:1,device:"Chrome on Windows",location:"Chennai, India",lastActive:"2 hours ago",current:!0},{id:2,device:"Safari on iPhone",location:"Chennai, India",lastActive:"2 days ago",current:!1}]);u.useEffect(()=>{a&&j(a.security_preferences.two_factor_enabled)},[a]);const F=x=>{const{id:v,value:M}=x.target;n($=>({...$,[v]:M}))},h=async x=>{if(x.preventDefault(),!!r){if(m.newPassword!==m.confirmPassword){p.error("New passwords do not match");return}if(m.newPassword.length<8){p.error("Password must be at least 8 characters long");return}s(!0);try{const{error:v}=await y.auth.updateUser({password:m.newPassword});if(v)throw v;p.success("Password updated successfully"),n({currentPassword:"",newPassword:"",confirmPassword:""})}catch(v){console.error("Error updating password:",v),p.error(v.message||"Failed to update password")}finally{s(!1)}}},E=async()=>{s(!0);try{const{error:x}=await y.auth.signOut({scope:"global"});if(x)throw x;p.success("Logged out of all devices"),f("/login")}catch(x){console.error("Error logging out of all sessions:",x),p.error(x.message||"Failed to log out of all sessions")}finally{s(!1)}},L=async x=>{k(v=>v.filter(M=>M.id!==x)),p.success("Session terminated")},S=async()=>{try{await d({security_preferences:{two_factor_enabled:!o,login_notifications:(a==null?void 0:a.security_preferences.login_notifications)||!0}}),j(!o)}catch(x){console.error("Error toggling 2FA:",x)}};return g?e.jsx(w,{className:"p-6",children:e.jsx("div",{className:"flex justify-center items-center h-40",children:e.jsx(b,{className:"w-8 h-8 animate-spin text-primary"})})}):e.jsxs(w,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(fe,{className:"h-5 w-5 text-primary"}),e.jsx("h2",{className:"text-xl font-semibold",children:"Security Settings"})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Change Password"}),e.jsxs("form",{onSubmit:h,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(C,{id:"currentPassword",label:"Current Password",type:l?"text":"password",value:m.currentPassword,onChange:F,icon:e.jsx(H,{className:"h-4 w-4"}),required:!0}),e.jsx("button",{type:"button",className:"absolute right-3 top-9 text-muted-foreground hover:text-foreground",onClick:()=>i(!l),children:l?e.jsx(he,{className:"h-4 w-4"}):e.jsx(pe,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"relative",children:e.jsx(C,{id:"newPassword",label:"New Password",type:l?"text":"password",value:m.newPassword,onChange:F,icon:e.jsx(we,{className:"h-4 w-4"}),required:!0})}),e.jsx("div",{className:"relative md:col-span-2",children:e.jsx(C,{id:"confirmPassword",label:"Confirm New Password",type:l?"text":"password",value:m.confirmPassword,onChange:F,required:!0})})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(N,{type:"submit",disabled:t,children:t?e.jsxs(e.Fragment,{children:[e.jsx(b,{className:"mr-2 h-4 w-4 animate-spin"}),"Updating..."]}):"Update Password"})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Two-Factor Authentication"}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Two-Factor Authentication"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Add an extra layer of security to your account"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:o,onChange:S}),e.jsx("div",{className:"w-11 h-6 bg-muted peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-primary rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary"})]})]}),o&&e.jsxs("div",{className:"mt-4 p-4 bg-muted/50 rounded-lg",children:[e.jsx("p",{className:"text-sm mb-2",children:"Two-factor authentication is enabled. You'll be asked for a verification code when you sign in on a new device."}),e.jsx(N,{variant:"outline",size:"sm",children:"Configure 2FA"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Active Sessions"}),e.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-border",children:[e.jsx("thead",{className:"bg-muted/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-muted-foreground uppercase",children:"Device"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-muted-foreground uppercase",children:"Location"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-muted-foreground uppercase",children:"Last Active"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-muted-foreground uppercase",children:"Action"})]})}),e.jsx("tbody",{className:"divide-y divide-border",children:c.map(x=>e.jsxs("tr",{className:x.current?"bg-primary/5":"",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium",children:x.device}),x.current&&e.jsx("span",{className:"ml-2 px-2 py-0.5 text-xs bg-primary/10 text-primary rounded-full",children:"Current"})]})}),e.jsx("td",{className:"px-4 py-3 text-muted-foreground",children:x.location}),e.jsx("td",{className:"px-4 py-3 text-muted-foreground",children:x.lastActive}),e.jsx("td",{className:"px-4 py-3 text-right",children:!x.current&&e.jsx(N,{variant:"ghost",size:"sm",onClick:()=>L(x.id),className:"text-destructive hover:text-destructive/80",children:"Terminate"})})]},x.id))})]})}),e.jsx("div",{className:"p-4 border-t",children:e.jsxs(N,{variant:"destructive",size:"sm",onClick:E,disabled:t,className:"flex items-center gap-2",children:[t?e.jsx(b,{className:"h-4 w-4 animate-spin"}):e.jsx(re,{className:"h-4 w-4"}),"Log out of all devices"]})})]})]})]})]})},Ye=()=>{const{user:r}=Y(),[a,d]=u.useState(!1),[g,f]=u.useState([]),[t,s]=u.useState(null);u.useEffect(()=>{(async()=>{if(r){d(!0);try{const{data:m,error:n}=await y.from("user_integrations").select("*").eq("user_id",r.id);if(n)throw n;const o=m||[],j=[{id:"whatsapp",name:"WhatsApp Business API",description:"Send automated messages and notifications to customers via WhatsApp",icon:e.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg",alt:"WhatsApp",className:"h-8 w-8"}),connected:!1,status:void 0},{id:"google",name:"Google Calendar",description:"Sync your orders and appointments with Google Calendar",icon:e.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/a/a5/Google_Calendar_icon_%282020%29.svg",alt:"Google Calendar",className:"h-8 w-8"}),connected:!1},{id:"stripe",name:"Stripe",description:"Process online payments securely with Stripe",icon:e.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/b/ba/Stripe_Logo%2C_revised_2016.svg",alt:"Stripe",className:"h-8 w-8"}),connected:!1},{id:"firebase",name:"Firebase",description:"Real-time notifications and data synchronization",icon:e.jsx("img",{src:"https://www.gstatic.com/devrel-devsite/prod/v2f6fb68338062e7c16672db62c4ab042dcb9bfbacf2fa51b6959426b203a4d8a/firebase/images/touchicon-180.png",alt:"Firebase",className:"h-8 w-8"}),connected:!0,status:"active"},{id:"supabase",name:"Supabase",description:"Database and authentication services",icon:e.jsx("img",{src:"https://supabase.com/favicon/favicon-196x196.png",alt:"Supabase",className:"h-8 w-8"}),connected:!0,status:"active"},{id:"gemini",name:"Google Gemini AI",description:"AI-powered insights and automation",icon:e.jsx("img",{src:"https://lh3.googleusercontent.com/vCwOBfHYvNVsYPpYJ51GaWpZ3SzrjGQHgD_HYzfFpuO5Jb_k-3YUJZWFHXJTxaT_Wg=w240-h480-rw",alt:"Gemini",className:"h-8 w-8"}),connected:!0,status:"active"}].map(c=>{const k=o.find(F=>F.integration_id===c.id);return k?{...c,connected:k.is_connected,status:k.status,api_key:k.api_key,config:k.config}:c});f(j)}catch(m){console.error("Error fetching integrations:",m),p.error("Failed to load integrations")}finally{d(!1)}}})()},[r]);const l=async i=>{if(!r){p.error("You must be logged in to manage integrations");return}s(i);try{const m=g.find(j=>j.id===i);if(!m)throw new Error("Integration not found");const n=!m.connected,{error:o}=await y.from("user_integrations").upsert({user_id:r.id,integration_id:i,is_connected:n,status:n?"active":null,updated_at:new Date().toISOString()},{onConflict:"user_id,integration_id"});if(o)throw o;f(j=>j.map(c=>c.id===i?{...c,connected:n,status:n?"active":void 0}:c)),p.success(`${m.name} ${m.connected?"disconnected":"connected"} successfully`)}catch(m){console.error("Error toggling integration:",m),p.error(`Failed to update integration: ${m.message}`)}finally{s(null)}};return e.jsxs(w,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(K,{className:"h-5 w-5 text-primary"}),e.jsx("h2",{className:"text-xl font-semibold",children:"Integrations"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("p",{className:"text-muted-foreground",children:"Connect your Classic Offset account with these services to enhance your workflow."}),a?e.jsx("div",{className:"flex justify-center items-center h-40",children:e.jsx(b,{className:"w-8 h-8 animate-spin text-primary"})}):e.jsx("div",{className:"grid grid-cols-1 gap-4",children:g.map(i=>e.jsx("div",{className:"border rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex-shrink-0",children:i.icon}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-medium flex items-center gap-2",children:[i.name,i.connected&&i.status==="active"&&e.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300",children:[e.jsx(_,{className:"w-3 h-3 mr-1"}),"Connected"]})]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:i.description}),i.connected&&e.jsx("div",{className:"mt-2",children:e.jsxs("a",{href:"#",className:"text-xs text-primary hover:underline inline-flex items-center",onClick:m=>m.preventDefault(),children:["Configure settings",e.jsx(xe,{className:"ml-1 h-3 w-3"})]})})]})]}),e.jsx(N,{variant:i.connected?"outline":"default",size:"sm",onClick:()=>l(i.id),disabled:t===i.id,children:t===i.id?e.jsxs(e.Fragment,{children:[e.jsx(b,{className:"mr-2 h-4 w-4 animate-spin"}),i.connected?"Disconnecting...":"Connecting..."]}):i.connected?"Disconnect":"Connect"})]})},i.id))}),e.jsxs("div",{className:"mt-4 p-4 bg-muted/50 rounded-lg",children:[e.jsx("h3",{className:"font-medium mb-2",children:"Need more integrations?"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"We're constantly adding new integrations. If you need a specific integration that's not listed here, please let us know."}),e.jsx(N,{variant:"outline",size:"sm",children:"Request Integration"})]})]})]})},Pe=()=>{const{user:r}=Y(),{settings:a,updateSettings:d,loading:g}=q(),[f,t]=u.useState(!1),[s,l]=u.useState(!1),[i,m]=u.useState(!1),[n,o]=u.useState({cacheSize:"100",autoBackup:!0,backupFrequency:"weekly",logLevel:"error",analyticsEnabled:!0});u.useEffect(()=>{if(a){const h=a.system_settings||{};o({cacheSize:h.cache_size||"100",autoBackup:h.auto_backup||!0,backupFrequency:h.backup_frequency||"weekly",logLevel:h.log_level||"error",analyticsEnabled:h.analytics_enabled||!0})}},[a]);const j=async()=>{t(!0);try{await d({system_settings:{cache_size:n.cacheSize,auto_backup:n.autoBackup,backup_frequency:n.backupFrequency,log_level:n.logLevel,analytics_enabled:n.analyticsEnabled}})}catch(h){console.error("Error saving system settings:",h)}finally{t(!1)}},c=async()=>{t(!0);try{await new Promise(h=>setTimeout(h,1e3)),p.success("Cache cleared successfully")}catch(h){console.error("Error clearing cache:",h),p.error("Failed to clear cache")}finally{t(!1)}},k=async()=>{if(!r){p.error("You must be logged in to create a backup");return}l(!0);try{const[h,E,L,S,x]=await Promise.all([y.from("customers").select("*").eq("user_id",r.id),y.from("orders").select("*").eq("user_id",r.id),y.from("payments").select("*").eq("created_by",r.id),y.from("materials").select("*").eq("created_by",r.id),y.from("expenses").select("*").eq("created_by",r.id)]),v={timestamp:new Date().toISOString(),user_id:r.id,customers:h.data||[],orders:E.data||[],payments:L.data||[],materials:S.data||[],expenses:x.data||[]},M=JSON.stringify(v,null,2),$=`data:application/json;charset=utf-8,${encodeURIComponent(M)}`,Z=`classic_offset_backup_${new Date().toISOString().split("T")[0]}.json`,P=document.createElement("a");P.setAttribute("href",$),P.setAttribute("download",Z),document.body.appendChild(P),P.click(),document.body.removeChild(P),await y.from("backup_logs").insert({user_id:r.id,backup_type:"manual",backup_size:M.length,status:"completed"}),p.success("Backup created successfully!")}catch(h){console.error("Error creating backup:",h),p.error("Failed to create backup")}finally{l(!1)}},F=async h=>{var L;const E=(L=h.target.files)==null?void 0:L[0];if(E){if(!r){p.error("You must be logged in to restore data");return}m(!0);try{const S=await E.text(),x=JSON.parse(S);if(!x.timestamp||!x.user_id)throw new Error("Invalid backup file format");await new Promise(v=>setTimeout(v,2e3)),await y.from("backup_logs").insert({user_id:r.id,backup_type:"restore",backup_size:S.length,status:"completed"}),p.success(`Restored from ${E.name}`)}catch(S){console.error("Error restoring backup:",S),p.error("Failed to restore from backup")}finally{m(!1),h.target.value=""}}};return g?e.jsx(w,{children:e.jsx("div",{className:"flex justify-center items-center h-40",children:e.jsx(b,{className:"w-8 h-8 animate-spin text-primary"})})}):e.jsx(w,{children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(V,{className:"h-5 w-5 text-primary"}),e.jsx("h2",{className:"text-xl font-semibold",children:"System Settings"})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Cache Settings"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(C,{id:"cacheSize",label:"Cache Size (MB)",type:"number",value:n.cacheSize,onChange:h=>o({...n,cacheSize:h.target.value}),icon:e.jsx(Ne,{className:"h-4 w-4"})}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Maximum size of local cache storage"})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs(N,{variant:"outline",onClick:c,disabled:f,className:"flex items-center gap-2",children:[f?e.jsx(b,{className:"h-4 w-4 animate-spin"}):e.jsx(ne,{className:"h-4 w-4"}),"Clear Cache"]})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Backup & Restore"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Automatic Backups"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Regularly backup your data"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:n.autoBackup,onChange:()=>o({...n,autoBackup:!n.autoBackup})}),e.jsx("div",{className:"w-11 h-6 bg-muted peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-primary rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary"})]})]}),n.autoBackup&&e.jsxs("div",{className:"ml-6",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Backup Frequency"}),e.jsxs("select",{value:n.backupFrequency,onChange:h=>o({...n,backupFrequency:h.target.value}),className:"w-full px-3 py-2 bg-background border border-input rounded-md focus:outline-none focus:ring-2 focus:ring-primary",children:[e.jsx("option",{value:"daily",children:"Daily"}),e.jsx("option",{value:"weekly",children:"Weekly"}),e.jsx("option",{value:"monthly",children:"Monthly"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[e.jsxs(N,{variant:"outline",onClick:k,disabled:s,className:"flex items-center gap-2",children:[s?e.jsx(b,{className:"h-4 w-4 animate-spin"}):e.jsx(ge,{className:"h-4 w-4"}),"Create Backup"]}),e.jsxs("div",{className:"relative",children:[e.jsxs(N,{variant:"outline",disabled:i,className:"flex items-center gap-2 w-full",onClick:()=>{var h;return(h=document.getElementById("restore-file"))==null?void 0:h.click()},children:[i?e.jsx(b,{className:"h-4 w-4 animate-spin"}):e.jsx(Fe,{className:"h-4 w-4"}),"Restore from Backup"]}),e.jsx("input",{id:"restore-file",type:"file",accept:".json",className:"hidden",onChange:F,disabled:i})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Logging & Analytics"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Log Level"}),e.jsxs("select",{value:n.logLevel,onChange:h=>o({...n,logLevel:h.target.value}),className:"w-full px-3 py-2 bg-background border border-input rounded-md focus:outline-none focus:ring-2 focus:ring-primary",children:[e.jsx("option",{value:"error",children:"Error Only"}),e.jsx("option",{value:"warn",children:"Warnings & Errors"}),e.jsx("option",{value:"info",children:"Info & Above"}),e.jsx("option",{value:"debug",children:"Debug (Verbose)"})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Control the level of detail in application logs"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Usage Analytics"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Help us improve by sharing anonymous usage data"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:n.analyticsEnabled,onChange:()=>o({...n,analyticsEnabled:!n.analyticsEnabled})}),e.jsx("div",{className:"w-11 h-6 bg-muted peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-primary rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"System Information"}),e.jsxs("div",{className:"bg-muted/50 p-4 rounded-lg space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"App Version"}),e.jsx("span",{className:"text-sm",children:"1.0.0"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Database"}),e.jsx("span",{className:"text-sm",children:"Supabase PostgreSQL"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Storage"}),e.jsx("span",{className:"text-sm",children:"Supabase Storage"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Last Updated"}),e.jsx("span",{className:"text-sm",children:new Date().toLocaleDateString()})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(N,{onClick:j,disabled:f,children:f?e.jsxs(e.Fragment,{children:[e.jsx(b,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):"Save System Settings"})})]})]})})},Ie=()=>{const{settings:r,updateSettings:a,loading:d}=q(),[g,f]=u.useState(!1),[t,s]=u.useState({language:"en",dateFormat:"DD/MM/YYYY",timeFormat:"24h",currency:"INR",timezone:"Asia/Kolkata"});u.useEffect(()=>{r&&s({language:r.language_preference,dateFormat:r.date_format,timeFormat:r.time_format,currency:r.currency,timezone:r.timezone})},[r]);const l=[{code:"en",name:"English"},{code:"ta",name:"Tamil (தமிழ்)"},{code:"hi",name:"Hindi (हिन्दी)"},{code:"te",name:"Telugu (తెలుగు)"},{code:"ml",name:"Malayalam (മലയാളം)"},{code:"kn",name:"Kannada (ಕನ್ನಡ)"}],i=[{value:"DD/MM/YYYY",label:"DD/MM/YYYY (31/12/2025)"},{value:"MM/DD/YYYY",label:"MM/DD/YYYY (12/31/2025)"},{value:"YYYY-MM-DD",label:"YYYY-MM-DD (2025-12-31)"},{value:"DD-MMM-YYYY",label:"DD-MMM-YYYY (31-Dec-2025)"}],m=[{value:"12h",label:"12-hour (1:30 PM)"},{value:"24h",label:"24-hour (13:30)"}],n=[{code:"INR",symbol:"₹",name:"Indian Rupee"},{code:"USD",symbol:"$",name:"US Dollar"},{code:"EUR",symbol:"€",name:"Euro"},{code:"GBP",symbol:"£",name:"British Pound"}],o=[{value:"Asia/Kolkata",label:"India (GMT+5:30)"},{value:"America/New_York",label:"New York (GMT-5:00)"},{value:"Europe/London",label:"London (GMT+0:00)"},{value:"Asia/Singapore",label:"Singapore (GMT+8:00)"}],j=async()=>{f(!0);try{await a({language_preference:t.language,date_format:t.dateFormat,time_format:t.timeFormat,currency:t.currency,timezone:t.timezone})}catch(c){console.error("Error saving localization settings:",c)}finally{f(!1)}};return d?e.jsx(w,{className:"p-6",children:e.jsx("div",{className:"flex justify-center items-center h-40",children:e.jsx(b,{className:"w-8 h-8 animate-spin text-primary"})})}):e.jsxs(w,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(J,{className:"h-5 w-5 text-primary"}),e.jsx("h2",{className:"text-xl font-semibold",children:"Localization Settings"})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Language"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:l.map(c=>e.jsx("div",{className:`p-4 border rounded-lg cursor-pointer transition-all ${t.language===c.code?"border-primary bg-primary/5":"border-border hover:border-primary/50"}`,onClick:()=>s({...t,language:c.code}),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(je,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"font-medium",children:c.name})]})},c.code))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Date & Time Format"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Date Format"}),e.jsx("select",{value:t.dateFormat,onChange:c=>s({...t,dateFormat:c.target.value}),className:"w-full px-3 py-2 bg-background border border-input rounded-md focus:outline-none focus:ring-2 focus:ring-primary",children:i.map(c=>e.jsx("option",{value:c.value,children:c.label},c.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Time Format"}),e.jsx("select",{value:t.timeFormat,onChange:c=>s({...t,timeFormat:c.target.value}),className:"w-full px-3 py-2 bg-background border border-input rounded-md focus:outline-none focus:ring-2 focus:ring-primary",children:m.map(c=>e.jsx("option",{value:c.value,children:c.label},c.value))})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Currency & Timezone"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Currency"}),e.jsx("select",{value:t.currency,onChange:c=>s({...t,currency:c.target.value}),className:"w-full px-3 py-2 bg-background border border-input rounded-md focus:outline-none focus:ring-2 focus:ring-primary",children:n.map(c=>e.jsxs("option",{value:c.code,children:[c.symbol," - ",c.name]},c.code))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Timezone"}),e.jsx("select",{value:t.timezone,onChange:c=>s({...t,timezone:c.target.value}),className:"w-full px-3 py-2 bg-background border border-input rounded-md focus:outline-none focus:ring-2 focus:ring-primary",children:o.map(c=>e.jsx("option",{value:c.value,children:c.label},c.value))})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Preview"}),e.jsx("div",{className:"p-4 bg-muted/50 rounded-lg",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-1",children:"Date & Time"}),e.jsx("p",{className:"text-muted-foreground",children:new Date().toLocaleDateString(t.language==="en"?"en-US":t.language==="ta"?"ta-IN":"en-IN",{year:"numeric",month:t.dateFormat.includes("MMM")?"short":"numeric",day:"numeric",hour:"numeric",minute:"numeric",hour12:t.timeFormat==="12h"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-1",children:"Currency"}),e.jsx("p",{className:"text-muted-foreground",children:new Intl.NumberFormat(t.language==="en"?"en-US":t.language==="ta"?"ta-IN":"en-IN",{style:"currency",currency:t.currency}).format(1234.56)})]})]})})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(N,{onClick:j,disabled:g,children:g?e.jsxs(e.Fragment,{children:[e.jsx(b,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):"Save Localization Settings"})})]})]})},as=()=>{const[r,a]=u.useState("profile");return e.jsx("div",{className:"p-6 max-w-6xl mx-auto",children:e.jsxs(ie.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Settings"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage your account settings and preferences"})]}),e.jsxs(Ee,{defaultValue:r,onValueChange:a,className:"space-y-6",children:[e.jsx("div",{className:"bg-card border rounded-lg p-1",children:e.jsxs(De,{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-2",children:[e.jsxs(D,{value:"profile",className:"flex items-center gap-2",children:[e.jsx(ce,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden md:inline",children:"Profile"})]}),e.jsxs(D,{value:"appearance",className:"flex items-center gap-2",children:[e.jsx(be,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden md:inline",children:"Appearance"})]}),e.jsxs(D,{value:"notifications",className:"flex items-center gap-2",children:[e.jsx(T,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden md:inline",children:"Notifications"})]}),e.jsxs(D,{value:"security",className:"flex items-center gap-2",children:[e.jsx(H,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden md:inline",children:"Security"})]}),e.jsxs(D,{value:"integrations",className:"flex items-center gap-2",children:[e.jsx(K,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden md:inline",children:"Integrations"})]}),e.jsxs(D,{value:"system",className:"flex items-center gap-2",children:[e.jsx(V,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden md:inline",children:"System"})]}),e.jsxs(D,{value:"localization",className:"flex items-center gap-2",children:[e.jsx(J,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden md:inline",children:"Localization"})]})]})}),e.jsx(A,{value:"profile",className:"space-y-6",children:e.jsx(Ae,{})}),e.jsx(A,{value:"appearance",className:"space-y-6",children:e.jsx(Me,{})}),e.jsx(A,{value:"notifications",className:"space-y-6",children:e.jsx(Le,{})}),e.jsx(A,{value:"security",className:"space-y-6",children:e.jsx(ze,{})}),e.jsx(A,{value:"integrations",className:"space-y-6",children:e.jsx(Ye,{})}),e.jsx(A,{value:"system",className:"space-y-6",children:e.jsx(Pe,{})}),e.jsx(A,{value:"localization",className:"space-y-6",children:e.jsx(Ie,{})})]})]})})};export{as as default};
